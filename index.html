<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="Kari WanG"><meta name="copyright" content="Kari WanG"><title>è®°äº‹æœ¬</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '4.2.1'
} </script><meta name="generator" content="Hexo 4.2.1"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Kari WanG</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">12</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">5</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">è®°äº‹æœ¬</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">è®°äº‹æœ¬</div><div id="site-sub-title"></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2021/01/20/1%E6%9C%88%E4%BB%BD%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/">1æœˆå¼€å‘è®°å½•</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-01-20</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/%E5%BC%80%E5%8F%91/">å¼€å‘</a></span><div class="content"><ol>
<li><p>JSON.parseéœ€è¦åšéç©ºåˆ¤æ–­ï¼›</p>
</li>
<li><p>ä½¿ç”¨LargeListçš„é¡µé¢å…¶ä»–å—çº§å…ƒç´ æœ€å¥½åŠ ä¸Šheight ä¸ç„¶ä¼šå¯¼è‡´6spã€7spåˆ—è¡¨ä¸‹æ‹‰æ»šåŠ¨åˆ°åº•éƒ¨å‡ºç°æŠ–åŠ¨æƒ…å†µï¼›</p>
</li>
<li><p>taroè‡ªå¸¦è¾“å…¥æ¡†iosè‹±æ–‡ä¹å®«æ ¼è¾“å…¥ä¼šé”®ç›˜é”™ä¹±ï¼›</p>
</li>
<li><p>å¼€å‘h5çš„æ—¶å€™ï¼Œè¾“å…¥æ¡†è°ƒèµ·appçš„é”®ç›˜ï¼Œæƒ³è¦åœ¨æ¢è¡Œæˆ–è€…ç¡®å®šé”®ä¹‹åè§¦å‘å‡½æ•°ï¼Œå¯åœ¨inputå¤–éƒ¨åŒ…æ‹¬formä½¿ç”¨onSubmitå®ç°ï¼›ä½†æ˜¯éœ€è¦é˜»æ­¢ä¸‹formæäº¤åŠ¨ä½œ</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">onSubmit&#x3D;&#123;event &#x3D;&gt; &#123;</span><br><span class="line">     &#x2F;&#x2F; é˜»æ­¢formè¡¨å•æäº¤åŠ¨ä½œ &#x3D;&#x3D;&#x3D; event.preventDefault() || (event.returnValue &#x3D; false)</span><br><span class="line">     event.preventDefault()</span><br><span class="line">     onConfirm &amp;&amp; onConfirm()</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>mobx å‡çº§çš„æ—¶å€™</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[mobx] There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use &#96;configure(&#123; isolateGlobalState: true &#125;)&#96;</span><br></pre></td></tr></table></figure>
<p>æ£€æŸ¥æœ¬é¡¹ç›®é‡Œé¢ä¾èµ–åº“ mobx ç‰ˆæœ¬æ˜¯å¦å’Œä¸»é¡¹ç›® mobx ç‰ˆæœ¬ä¸€è‡´ï¼Œ<br>mobx 7x ä½¿ç”¨ class å†™ store çš„æ—¶å€™éœ€è¦æ³¨æ„åŠ ä¸Š makeAutoObservable</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class Timer &#123;</span><br><span class="line">     secondsPassed &#x3D; 0</span><br><span class="line">     constructor() &#123;</span><br><span class="line">         makeAutoObservable(this)</span><br><span class="line">        &#125;</span><br><span class="line">     increaseTimer() &#123;</span><br><span class="line">     this.secondsPassed +&#x3D; 1</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>package.json å¯ä»¥ä½¿ç”¨ resolutions æ¥åˆå¹¶å¤šä¸ªç‰ˆæœ¬</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;resolutions&quot;: &#123;</span><br><span class="line">   &quot;mobx&quot;: &quot;6.0.5&quot;,</span><br><span class="line">   &quot;mobx-react&quot;: &quot;7.0.6&quot;</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>
</li>
</ol>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/11/22/11%E6%9C%88%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/">11æœˆå¼€å‘è®°å½•</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-11-22</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/%E5%BC%80%E5%8F%91/">å¼€å‘</a></span><div class="content"><h3 id="Reactä½¿ç”¨htmlçš„Eslint"><a href="#Reactä½¿ç”¨htmlçš„Eslint" class="headerlink" title="Reactä½¿ç”¨htmlçš„Eslint"></a>Reactä½¿ç”¨htmlçš„Eslint</h3><p>åœ¨æˆ‘ä»¬å¼€å‘ç”¨reactå¼€å‘å…¬ä¼—å·çš„æ—¶å€™ï¼Œ<br>æœ‰äº›æ–‡ä»¶çš„é¢„è§ˆä¼šä½¿ç”¨iframeè¿›è¡Œè°·æ­Œæˆ–è€…å¾®è½¯çš„åœ¨çº¿æµè§ˆ<br>commitçš„æ—¶å€™eslintä¼šæŠ¥è¿™æ ·çš„é”™è¯¯:â€æ— æ³•ä½¿ç”¨ HTML æ ‡ç­¾. react/forbid-elementsâ€,<br>æˆ‘ä»¬å¦‚æœçœŸçš„æ²¡æœ‰éœ€è¦è¿™æ ·ä½¿ç”¨ï¼ˆä¸èƒ½ä½¿ç”¨webviewçš„æƒ…å†µä¸‹ï¼‰<br>åŠ æ³¨é‡Š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;* eslint react&#x2F;forbid-elements : 0 *&#x2F;</span><br></pre></td></tr></table></figure>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/09/29/%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F/">å†…å­˜æ³„æ¼</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-09-29</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/js/">js</a></span><div class="content"><h3 id="ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼"><a href="#ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼" class="headerlink" title="ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼?"></a>ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼?</h3><p>ç¨‹åºçš„è¿è¡Œéœ€è¦å†…å­˜ã€‚åªè¦ç¨‹åºæå‡ºè¦æ±‚ï¼Œæ“ä½œç³»ç»Ÿæˆ–è€…è¿è¡Œæ—¶ï¼ˆruntimeï¼‰å°±å¿…é¡»ä¾›ç»™å†…å­˜ã€‚<br>ä¸å†ç”¨åˆ°çš„å†…å­˜ï¼Œæ²¡æœ‰åŠæ—¶é‡Šæ”¾ï¼Œå°±å«åšå†…å­˜æ³„æ¼ï¼ˆmemory leakï¼‰ã€‚<br>å¸¸è§çš„å†…å­˜æ³„æ¼çš„æƒ…å†µ</p>
<h4 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const fn &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    ts &#x3D; &#39;test&#39;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; ä¼šé»˜è®¤ window.ts &#x3D; &#39;test&#39;</span><br></pre></td></tr></table></figure>
<h4 id="å¿˜è®°æ¸…é™¤çš„è®¡æ—¶å™¨æˆ–è€…å›è°ƒå‡½æ•°"><a href="#å¿˜è®°æ¸…é™¤çš„è®¡æ—¶å™¨æˆ–è€…å›è°ƒå‡½æ•°" class="headerlink" title="å¿˜è®°æ¸…é™¤çš„è®¡æ—¶å™¨æˆ–è€…å›è°ƒå‡½æ•°"></a>å¿˜è®°æ¸…é™¤çš„è®¡æ—¶å™¨æˆ–è€…å›è°ƒå‡½æ•°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const someResource &#x3D; getData();</span><br><span class="line">setInterval(function() &#123;</span><br><span class="line">    let node &#x3D; document.getElementById(&#39;Node&#39;);</span><br><span class="line">    if(node) &#123;</span><br><span class="line">        node.innerHTML &#x3D; JSON.stringify(someResource));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, 1000);</span><br></pre></td></tr></table></figure>
<h4 id="è„±ç¦»DOMçš„å¼•ç”¨"><a href="#è„±ç¦»DOMçš„å¼•ç”¨" class="headerlink" title="è„±ç¦»DOMçš„å¼•ç”¨"></a>è„±ç¦»DOMçš„å¼•ç”¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">const elements &#x3D; &#123;</span><br><span class="line">    button: document.getElementById(&#39;button&#39;),</span><br><span class="line">    image: document.getElementById(&#39;image&#39;),</span><br><span class="line">    text: document.getElementById(&#39;text&#39;)</span><br><span class="line">&#125;;</span><br><span class="line">const doStuff &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    image.src &#x3D; &#39;http:&#x2F;&#x2F;some.url&#x2F;image&#39;;</span><br><span class="line">    button.click();</span><br><span class="line">    console.log(text.innerHTML);</span><br><span class="line">    &#x2F;&#x2F; Much more logic</span><br><span class="line">&#125;</span><br><span class="line">const removeButton &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F; The button is a direct child of body.</span><br><span class="line">    document.body.removeChild(document.getElementById(&#39;button&#39;));</span><br><span class="line">    &#x2F;&#x2F; At this point, we still have a reference to #button in the global</span><br><span class="line">    &#x2F;&#x2F; elements dictionary. In other words, the button element is still in</span><br><span class="line">    &#x2F;&#x2F; memory and cannot be collected by the GC.</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h4><p>JavaScriptå¼€å‘çš„ä¸€ä¸ªå…³é”®æ–¹é¢æ˜¯é—­åŒ…ï¼šä»çˆ¶ä½œç”¨åŸŸæ•è·å˜é‡çš„åŒ¿åå‡½æ•°ã€‚ Meteorå¼€å‘äººå‘˜å‘ç°äº†ä¸€ä¸ªç‰¹å®šçš„æƒ…å†µï¼Œç”±äºJavaScriptè¿è¡Œæ—¶çš„å®ç°ç»†èŠ‚ï¼Œå¯èƒ½ä»¥ä¸€ç§å¾®å¦™çš„æ–¹å¼æ³„æ¼å†…å­˜ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">let theThing &#x3D; null;</span><br><span class="line">const replaceThing &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    let originalThing &#x3D; theThing;</span><br><span class="line">    const unused &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">        if (originalThing)</span><br><span class="line">        console.log(&quot;hi&quot;);</span><br><span class="line">    &#125;;</span><br><span class="line">    theThing &#x3D; &#123;</span><br><span class="line">        longStr: new Array(1000000).join(&#39;*&#39;),</span><br><span class="line">        someMethod: () &#x3D;&gt; &#123;</span><br><span class="line">            console.log(someMessage);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">setInterval(replaceThing, 1000);</span><br></pre></td></tr></table></figure>
<h3 id="javascriptçš„å†…å­˜ç®¡ç†æœºåˆ¶"><a href="#javascriptçš„å†…å­˜ç®¡ç†æœºåˆ¶" class="headerlink" title="javascriptçš„å†…å­˜ç®¡ç†æœºåˆ¶"></a>javascriptçš„å†…å­˜ç®¡ç†æœºåˆ¶</h3><p>JavaScriptæ˜¯åƒåœ¾å›æ”¶è¯­è¨€ä¹‹ä¸€ã€‚ åƒåœ¾å›æ”¶è¯­è¨€é€šè¿‡å®šæœŸæ£€æŸ¥å“ªäº›å…ˆå‰åˆ†é…çš„å†…å­˜æ˜¯å¦â€œå¯è¾¾â€æ¥å¸®åŠ©å¼€å‘äººå‘˜ç®¡ç†å†…å­˜ã€‚ æ¢å¥è¯è¯´ï¼Œåƒåœ¾å›æ”¶è¯­è¨€å°†ç®¡ç†å†…å­˜çš„é—®é¢˜ä»â€œä»€ä¹ˆå†…å­˜ä»å¯ç”¨ï¼Ÿ åˆ°â€œä»€ä¹ˆå†…å­˜ä»å¯è¾¾ï¼Ÿâ€ã€‚åŒºåˆ«æ˜¯å¾®å¦™çš„ï¼Œä½†é‡è¦çš„æ˜¯ï¼šè™½ç„¶åªæœ‰å¼€å‘äººå‘˜çŸ¥é“å°†æ¥æ˜¯å¦éœ€è¦ä¸€å—åˆ†é…çš„å†…å­˜ï¼Œä½†æ˜¯ä¸å¯è¾¾çš„å†…å­˜å¯ä»¥é€šè¿‡ç®—æ³•ç¡®å®šå¹¶æ ‡è®°ä¸ºè¿”å›åˆ°æ“ä½œç³»ç»Ÿã€‚<br>åƒåœ¾å›æ”¶è¯­è¨€æ³„æ¼çš„ä¸»è¦åŸå› æ˜¯ä¸éœ€è¦çš„å¼•ç”¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const arr &#x3D; [1,2,3]</span><br><span class="line">console.log(&#39;Hi&#39;)</span><br></pre></td></tr></table></figure>
<p>è™½ç„¶æˆ‘ä»¬æ²¡æœ‰å»è°ƒç”¨arrï¼Œä½†æ˜¯[1,2,3]ä»–ä»¬å ç”¨äº†å†…å­˜å› æ­¤ï¼Œjsä¼šè®¤ä¸ºä»–æ˜¯ä¸éœ€è¦è¢«å›æ”¶çš„ï¼Œè¿™å°±äº§ç”Ÿäº†å†…å­˜æ³„æ¼ï¼Œæˆ‘ä»¬å¯ä»¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let arr &#x3D; [1,2,3]</span><br><span class="line">console.log(&#39;Hi&#39;)</span><br><span class="line">arr &#x3D; null</span><br><span class="line">&#x2F;&#x2F; å¯ä»¥ä½¿arrä¸ºnullè¿™æ ·å°±ä¼šè®¤ä¸ºæ­¤å˜é‡æ˜¯ä¸ªåƒåœ¾å˜é‡ï¼Œå°±ä¼šå›æ”¶å®ƒã€‚</span><br></pre></td></tr></table></figure>
<h3 id="å†…å­˜æ³„æ¼çš„è¯†åˆ«æ–¹æ³•"><a href="#å†…å­˜æ³„æ¼çš„è¯†åˆ«æ–¹æ³•" class="headerlink" title="å†…å­˜æ³„æ¼çš„è¯†åˆ«æ–¹æ³•"></a>å†…å­˜æ³„æ¼çš„è¯†åˆ«æ–¹æ³•</h3><p>â€¢ Chrome æµè§ˆå™¨æŸ¥çœ‹å†…å­˜å ç”¨ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚<br>1.æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œé€‰æ‹© Timeline é¢æ¿ã€‚<br>2.åœ¨é¡¶éƒ¨çš„Captureå­—æ®µé‡Œé¢å‹¾é€‰ Memoryã€‚<br>3.ç‚¹å‡»å·¦ä¸Šè§’çš„å½•åˆ¶æŒ‰é’®ã€‚<br>4.åœ¨é¡µé¢ä¸Šè¿›è¡Œå„ç§æ“ä½œï¼Œæ¨¡æ‹Ÿç”¨æˆ·çš„ä½¿ç”¨æƒ…å†µã€‚<br>5.ä¸€æ®µæ—¶é—´åï¼Œç‚¹å‡»å¯¹è¯æ¡†çš„ stop æŒ‰é’®ï¼Œé¢æ¿ä¸Šå°±ä¼šæ˜¾ç¤ºè¿™æ®µæ—¶é—´çš„å†…å­˜å ç”¨æƒ…å†µã€‚  </p>
<p>â€¢ å‘½ä»¤è¡Œå¯ä»¥ä½¿ç”¨ Node æä¾›çš„process.memoryUsageæ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">console.log(process.memoryUsage());</span><br><span class="line">&#x2F;&#x2F; &#123; rss: 27709440,</span><br><span class="line">&#x2F;&#x2F;  heapTotal: 5685248,</span><br><span class="line">&#x2F;&#x2F;  heapUsed: 3449392,</span><br><span class="line">&#x2F;&#x2F;  external: 8772 &#125;</span><br></pre></td></tr></table></figure>
<p>rssï¼ˆresident set sizeï¼‰ï¼šæ‰€æœ‰å†…å­˜å ç”¨ï¼ŒåŒ…æ‹¬æŒ‡ä»¤åŒºå’Œå †æ ˆã€‚<br>heapTotalï¼šâ€å †â€å ç”¨çš„å†…å­˜ï¼ŒåŒ…æ‹¬ç”¨åˆ°çš„å’Œæ²¡ç”¨åˆ°çš„ã€‚<br>heapUsedï¼šç”¨åˆ°çš„å †çš„éƒ¨åˆ†ã€‚<br>externalï¼š V8 å¼•æ“å†…éƒ¨çš„ C++ å¯¹è±¡å ç”¨çš„å†…å­˜ã€‚</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/08/19/Hooks/">Hooks</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-08-19</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/React/">React</a></span><div class="content"><h3 id="Hook-useMemo"><a href="#Hook-useMemo" class="headerlink" title="Hook useMemo"></a>Hook useMemo</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const memoizedValue &#x3D; useMemo(() &#x3D;&gt; computeExpensiveValue(a, b), [a, b]);</span><br></pre></td></tr></table></figure>
<p>è¿”å›ä¸€ä¸ª memoized å€¼ã€‚<br>æŠŠâ€œåˆ›å»ºâ€å‡½æ•°å’Œä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥ useMemoï¼Œå®ƒä»…ä¼šåœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®— memoized å€¼ã€‚è¿™ç§ä¼˜åŒ–æœ‰åŠ©äºé¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è¿›è¡Œé«˜å¼€é”€çš„è®¡ç®—ã€‚</p>
<p>è®°ä½ï¼Œä¼ å…¥ useMemo çš„å‡½æ•°ä¼šåœ¨æ¸²æŸ“æœŸé—´æ‰§è¡Œã€‚è¯·ä¸è¦åœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨æ‰§è¡Œä¸æ¸²æŸ“æ— å…³çš„æ“ä½œï¼Œè¯¸å¦‚å‰¯ä½œç”¨è¿™ç±»çš„æ“ä½œå±äº useEffect çš„é€‚ç”¨èŒƒç•´ï¼Œè€Œä¸æ˜¯ useMemoã€‚</p>
<p>å¦‚æœæ²¡æœ‰æä¾›ä¾èµ–é¡¹æ•°ç»„ï¼ŒuseMemo åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šè®¡ç®—æ–°çš„å€¼ã€‚</p>
<p>ä½ å¯ä»¥æŠŠ useMemo ä½œä¸ºæ€§èƒ½ä¼˜åŒ–çš„æ‰‹æ®µï¼Œä½†ä¸è¦æŠŠå®ƒå½“æˆè¯­ä¹‰ä¸Šçš„ä¿è¯ã€‚å°†æ¥ï¼ŒReact å¯èƒ½ä¼šé€‰æ‹©â€œé—å¿˜â€ä»¥å‰çš„ä¸€äº› memoized å€¼ï¼Œå¹¶åœ¨ä¸‹æ¬¡æ¸²æŸ“æ—¶é‡æ–°è®¡ç®—å®ƒä»¬ï¼Œæ¯”å¦‚ä¸ºç¦»å±ç»„ä»¶é‡Šæ”¾å†…å­˜ã€‚å…ˆç¼–å†™åœ¨æ²¡æœ‰ useMemo çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ‰§è¡Œçš„ä»£ç  â€”â€” ä¹‹åå†åœ¨ä½ çš„ä»£ç ä¸­æ·»åŠ  useMemoï¼Œä»¥è¾¾åˆ°ä¼˜åŒ–æ€§èƒ½çš„ç›®çš„ã€‚</p>
<blockquote>
<p>é¡¹ç›®ä¸­éƒ¨åˆ†å‡½æ•°ç»„ä»¶è¿›è¡Œå¤§æ‰¹é‡çš„è®¡ç®—æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ï¼Œè¿”å›å­—ç¬¦ä¸²ç¼“å­˜ï¼Œé¡¹ç›®ä¸­éƒ¨åˆ†ä½¿ç”¨</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; ä¾èµ–å‡½æ•°ä¼˜åŒ–ï¼Œå»é™¤å¤šä½™æ¸²æŸ“</span><br><span class="line">const startTimeStr &#x3D; useMemo(() &#x3D;&gt; customTime(startTime, formatStr), [startTime])</span><br><span class="line">const endTimeStr &#x3D; useMemo(() &#x3D;&gt; customTime(endTime, formatStr), [endTime])</span><br></pre></td></tr></table></figure>

<h3 id="Hook-useState"><a href="#Hook-useState" class="headerlink" title="Hook useState"></a>Hook useState</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const [startTime, setStartTime] &#x3D; useState(initialStartTime)</span><br><span class="line">const [endTime, setEndTime] &#x3D; useState(initialEndTime)</span><br></pre></td></tr></table></figure>

<h3 id="Hook-useEffect"><a href="#Hook-useEffect" class="headerlink" title="Hook useEffect"></a>Hook useEffect</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">useEffect(() &#x3D;&gt; &#123;</span><br><span class="line">    setStartTime(initialStartTime)</span><br><span class="line">    setEndTime(initialEndTime)</span><br><span class="line">    console.log(&#39;initialStartTime&#x3D;&#x3D;&#x3D;&#x3D;&#39;)</span><br><span class="line">&#125;, [initialStartTime, initialEndTime])</span><br></pre></td></tr></table></figure>

<h3 id="Hook-useCallBack"><a href="#Hook-useCallBack" class="headerlink" title="Hook useCallBack"></a>Hook useCallBack</h3><blockquote>
<p>åœ¨å¼€å‘å‡½æ•°å¼ç»„ä»¶çš„æ—¶å€™ï¼Œéš¾å…ä¼šé‡åˆ°ä¸€äº›æ•°æ®å¤„ç†ï¼Œè¿™æ—¶å€™ä¸ºäº†å‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“å¯ä»¥ä½¿ç”¨Hooké‡Œé¢çš„useCallBackæ¥å¤„ç†</p>
</blockquote>
<p>æŠŠå†…è”å›è°ƒå‡½æ•°åŠä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥ useCallbackï¼Œå®ƒå°†è¿”å›è¯¥å›è°ƒå‡½æ•°çš„ memoized ç‰ˆæœ¬ï¼Œè¯¥å›è°ƒå‡½æ•°ä»…åœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰ä¼šæ›´æ–°ã€‚å½“ä½ æŠŠå›è°ƒå‡½æ•°ä¼ é€’ç»™ç»è¿‡ä¼˜åŒ–çš„å¹¶ä½¿ç”¨å¼•ç”¨ç›¸ç­‰æ€§å»é¿å…éå¿…è¦æ¸²æŸ“ï¼ˆä¾‹å¦‚ shouldComponentUpdateï¼‰çš„å­ç»„ä»¶æ—¶ï¼Œå®ƒå°†éå¸¸æœ‰ç”¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const memoizedCallback &#x3D; useCallback(</span><br><span class="line">    () &#x3D;&gt; &#123;</span><br><span class="line">        doSomething(a, b);</span><br><span class="line">    &#125;, [a, b]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é¡¹ç›®ä¸­ä½¿ç”¨</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; ä¾èµ–å‡½æ•°ä¼˜åŒ–ï¼Œå»é™¤å¤šä½™æ¸²æŸ“</span><br><span class="line">const isRightOnPress &#x3D; useCallback(() &#x3D;&gt; &#123;</span><br><span class="line">    if (buttonType &amp;&amp; buttonType[1] !&#x3D;&#x3D; 3 &amp;&amp; rightOnPress) &#123;</span><br><span class="line">    rightOnPress()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, [buttonType, rightOnPress])</span><br></pre></td></tr></table></figure>

<h3 id="Hook-useLocalStore"><a href="#Hook-useLocalStore" class="headerlink" title="Hook useLocalStore"></a>Hook useLocalStore</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import &#123; observer, useLocalStore &#125; from &#39;mobx-react&#39;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; åˆ›å»ºstore</span><br><span class="line"> const store &#x3D; useLocalStore(() &#x3D;&gt; (&#123;</span><br><span class="line">    startTime: initialStartTime,</span><br><span class="line">    setStartTime(val) &#123;</span><br><span class="line">      store.startTime &#x3D; val</span><br><span class="line">    &#125;,</span><br><span class="line">    endTime: initialEndTime,</span><br><span class="line">    setEndTime(val) &#123;</span><br><span class="line">      store.startTime &#x3D; val</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;))</span><br><span class="line">  const &#123; startTime, endTime, setStartTime, setEndTime &#125; &#x3D; store</span><br></pre></td></tr></table></figure>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/07/03/key%E4%B8%8E%E6%B8%B2%E6%9F%93/">7æœˆå¼€å‘è®°å½•</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-03</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/%E5%BC%80%E5%8F%91/">å¼€å‘</a></span><div class="content"><h3 id="keyä¸æ¸²æŸ“"><a href="#keyä¸æ¸²æŸ“" class="headerlink" title="keyä¸æ¸²æŸ“"></a>keyä¸æ¸²æŸ“</h3><p>åšå›¾è¡¨æ—¶å€™å¼•å…¥äº†ç¬¬ä¸‰æ–¹åº“ <a href="https://github.com/jbaysolutions/vue-grid-layout" target="_blank" rel="noopener">vue-grid-layout</a> æ¥æ”¯æŒè‡ªå®šä¹‰å¸ƒå±€ï¼Œä½†æ˜¯ä¼šå‡ºç°åˆ‡æ¢é¡µç­¾+æ”¹å˜çª—å£å°ºå¯¸=å›¾è¡¨é‡å çš„bugã€‚çœ‹äº†ä¸€ä¸‹æºç ï¼Œå‘ç°æ˜¯ containerWidth è¿™ä¸ªå€¼æ›´æ–°å‡ºç°äº†å¼‚å¸¸ã€‚æ—‹å³æƒ³åˆ°çš„æ–¹æ³•æ˜¯ç›´æ¥é‡æ–°æ›´æ–°ï¼Œæˆ–è€…é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚ç„¶åæƒ³åˆ°äº†æ”¹å˜keyå€¼æ¥æ¸²æŸ“ç»„ä»¶çš„æ–¹æ³•ã€‚</p>
<p><img src="https://i.loli.net/2020/07/11/BdW1bnNkAXe7xTQ.png" alt=""></p>
<p>ç›´æ¥åœ¨ç»„ä»¶ç»‘å®šäº† <code>:key=&quot;$route.name&quot;</code> å½“é¡µç­¾åˆ‡æ¢æ—¶ï¼Œé‡æ–°æ¸²æŸ“ä¸€éæ¥ä¿è¯ containerWidth çš„æ­£ç¡®æ›´æ–°ï¼Œæ¥é˜²æ­¢å›¾æ ‡é‡å ã€‚</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/06/19/LCP12-%E5%B0%8F%E5%BC%A0%E5%88%B7%E9%A2%98%E8%AE%A1%E5%88%92/">LCP12.å°å¼ åˆ·é¢˜è®¡åˆ’</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-06-19</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/%E7%AE%97%E6%B3%95/">ç®—æ³•</a></span><div class="content"><h3 id="é¢˜å¹²åœ¨æ­¤"><a href="#é¢˜å¹²åœ¨æ­¤" class="headerlink" title="é¢˜å¹²åœ¨æ­¤"></a>é¢˜å¹²åœ¨æ­¤</h3><p><img src="https://i.loli.net/2020/06/19/5kcyxPC1EOoRwUm.png" alt=""></p>
<h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>è¿™é“é¢˜æˆ‘æ²¡æƒ³å‡ºæ¥æ€è·¯ã€‚ç»™å‡ºä¸€ä¸ªç”¨ä¾‹ï¼Œæˆ‘èƒ½ç”¨è„‘å­ç›´æ¥ç®—å‡ºæ¥ï¼Œä½†æ˜¯çš„ç¡®å†™ä¸å‡ºæ–¹æ³•ã€‚</p>
<p>è€Œä¸”æ²¡æœ‰æ‰¾åˆ°jsçš„è§£é¢˜æ€è·¯ï¼Œçœ‹å¾—c++çš„ä»£ç æ‰æ˜ç™½æ€è·¯ï¼Œè€Œä¸”çœŸçš„å¾ˆç²¾å¦™ï¼Œå†ç»™æˆ‘æ—¶é—´ä¹Ÿæ˜¯æƒ³ä¸å‡ºæ¥è§£æ³•ï¼Œæœ‰ç‚¹æŒ«è´¥æ„Ÿã€‚</p>
<p>ä½†æ˜¯æœ‰æœºä¼šç•™ä¸‹æ¥è¿™é“é¢˜çš„ç¬¬ä¸€ä¸ªjsè§£é¢˜æ€è·¯ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¼€å¿ƒçš„ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> minTime = <span class="function"><span class="keyword">function</span>(<span class="params">time, m</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(time.length &lt;= m) &#123; <span class="keyword">return</span> <span class="number">0</span> &#125;</span><br><span class="line">    <span class="keyword">let</span> l = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> r = <span class="built_in">Number</span>.MAX_VALUE</span><br><span class="line">    <span class="keyword">while</span>(l &lt; r) &#123;</span><br><span class="line">        <span class="keyword">let</span> mid = <span class="built_in">Math</span>.floor(l + (r - l) / <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">if</span>(canS(time, m, mid)) &#123;</span><br><span class="line">            r = mid</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            l = mid + <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> canS = <span class="function"><span class="keyword">function</span>(<span class="params">time, m, mid</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> sum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> maxt = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> t <span class="keyword">of</span> time) &#123;</span><br><span class="line">        sum = sum + t</span><br><span class="line">        maxt = <span class="built_in">Math</span>.max(maxt, t)</span><br><span class="line">        <span class="keyword">if</span>(sum - maxt &gt; mid) &#123;</span><br><span class="line">            <span class="keyword">if</span>( ++count == m) &#123; <span class="keyword">return</span> <span class="literal">false</span> &#125;</span><br><span class="line">            sum = t</span><br><span class="line">            maxt = t</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>åŠ æ²¹å§ï¼Œè¦å­¦çš„è¿˜æ˜¯å¾ˆå¤šã€‚</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/06/13/852-%E5%B1%B1%E8%84%89%E6%95%B0%E7%BB%84%E7%9A%84%E5%B3%B0%E9%A1%B6%E7%B4%A2%E5%BC%95/">852.å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-06-13</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/%E7%AE%97%E6%B3%95/">ç®—æ³•</a></span><div class="content"><h3 id="é¢˜å¹²åœ¨æ­¤"><a href="#é¢˜å¹²åœ¨æ­¤" class="headerlink" title="é¢˜å¹²åœ¨æ­¤"></a>é¢˜å¹²åœ¨æ­¤</h3><p><img src="https://i.loli.net/2020/06/13/K3wa16oQOhuXeyT.png" alt=""></p>
<h3 id="æˆ‘çš„è§£é¢˜"><a href="#æˆ‘çš„è§£é¢˜" class="headerlink" title="æˆ‘çš„è§£é¢˜"></a>æˆ‘çš„è§£é¢˜</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> peakIndexInMountainArray = <span class="function"><span class="keyword">function</span>(<span class="params">A</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> arr = A.filter(<span class="function"><span class="params">v</span> =&gt;</span> v&gt;<span class="number">-1</span>)</span><br><span class="line">    arr.sort(<span class="function">(<span class="params">a,b</span>) =&gt;</span> &#123;<span class="keyword">return</span> a-b&#125;)</span><br><span class="line">    <span class="keyword">return</span> A.findIndex(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;<span class="keyword">return</span> v === arr[arr.length<span class="number">-1</span>]&#125;)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>çœ‹äº†ä¸€ä¸‹è¯„è®ºï¼Œå¤§å®¶å¯¹è¿™é“é¢˜å¥½åƒéƒ½æœ‰äº›æ‘¸ä¸ç€å¤´è„‘ï¼Œè«åå…¶å¦™åœ°å˜æˆäº†å¯»æ‰¾æœ€å¤§å€¼ç´¢å¼•äº†ã€‚ä¸è¿‡æˆ‘æ‰¾åˆ°äº†æœ€æ·±å¾—æˆ‘å¿ƒçš„ä»£ç ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> peakIndexInMountainArray = <span class="function"><span class="keyword">function</span>(<span class="params">A</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> A.indexOf(<span class="built_in">Math</span>.max(...A))</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>emmmï¼Œè¿™æ˜¯æœ€ç¬¦åˆæˆ‘å®¡ç¾çš„ä»£ç äº†ã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å‰æ®µå˜›ï¼Œæœ‰çš„æ˜¯å†…å­˜ã€‚ä¸ºå¾—æ˜¯ä»£ç ç®€æ´ç‚¹å˜›ï¼Œä¸å¯’é¢¤ã€‚ğŸ™ƒ</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/06/04/572-%E5%8F%A6%E4%B8%80%E4%B8%AA%E6%A0%91%E7%9A%84%E5%AD%90%E6%A0%91/">572.å¦ä¸€ä¸ªæ ‘çš„å­æ ‘</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-06-04</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/%E7%AE%97%E6%B3%95/">ç®—æ³•</a></span><div class="content"><h3 id="é¢˜å¹²åœ¨æ­¤"><a href="#é¢˜å¹²åœ¨æ­¤" class="headerlink" title="é¢˜å¹²åœ¨æ­¤"></a>é¢˜å¹²åœ¨æ­¤</h3><p><img src="https://i.loli.net/2020/06/01/PX5UKbNvhOkoYQm.png" alt=""></p>
<h3 id="æˆ‘çš„è§£é¢˜"><a href="#æˆ‘çš„è§£é¢˜" class="headerlink" title="æˆ‘çš„è§£é¢˜"></a>æˆ‘çš„è§£é¢˜</h3><p>ç¬¬ä¸€æ¬¡æ¥è§¦äºŒå‰æ ‘ï¼Œæ²¡å¤ªç†è§£ç”¨ä¾‹çš„ç»“æ„ã€‚è¿˜æ˜¯logå‡ºæ¥åæ‰æ˜ç™½ç»“æ„æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œæ€»ä¹‹å¾ˆå®ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isSubtree = <span class="function"><span class="keyword">function</span>(<span class="params">s, t</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(t === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span>(s === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    <span class="keyword">return</span> isSame(s,t) || isSubtree(s.left,t) || isSubtree(s.right,t)</span><br><span class="line">  </span><br><span class="line">  	<span class="keyword">var</span> isSame = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(b === <span class="literal">null</span> &amp;&amp; a === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    	<span class="keyword">if</span>(a === <span class="literal">null</span> || b === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    	<span class="keyword">if</span>(a.val === b.val)&#123;</span><br><span class="line">    	    <span class="keyword">return</span> same(a.left,b.left) &amp;&amp; same(a.right,b.right)</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>è¿™é¢˜æ„Ÿå—å°±æ˜¯äºŒå‰æ ‘éƒ½æ˜¯å…³äºé€’å½’çš„ï¼Ÿï¼Ÿï¼Ÿ</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/06/02/Map/">Map</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-06-02</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/js/">js</a></span><div class="content"><h3 id="å«ä¹‰åŠåŸºæœ¬ç”¨æ³•"><a href="#å«ä¹‰åŠåŸºæœ¬ç”¨æ³•" class="headerlink" title="å«ä¹‰åŠåŸºæœ¬ç”¨æ³•"></a>å«ä¹‰åŠåŸºæœ¬ç”¨æ³•</h3><p>JavaScript çš„å¯¹è±¡ï¼ˆObjectï¼‰ï¼Œæœ¬è´¨ä¸Šæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼ˆHash ç»“æ„ï¼‰ï¼Œä½†æ˜¯ä¼ ç»Ÿä¸Šåªèƒ½ç”¨å­—ç¬¦ä¸²å½“ä½œé”®ã€‚è¿™ç»™å®ƒçš„ä½¿ç”¨å¸¦æ¥äº†å¾ˆå¤§çš„é™åˆ¶ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒES6 æä¾›äº† Map æ•°æ®ç»“æ„ã€‚å®ƒç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯â€œé”®â€çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œå„ç§ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥å½“ä½œé”®ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="keyword">const</span> o = &#123;<span class="attr">p</span>: <span class="string">'Hello World'</span>&#125;;</span><br><span class="line"></span><br><span class="line">m.set(o, <span class="string">'content'</span>)</span><br><span class="line">m.get(o) <span class="comment">// "content"</span></span><br><span class="line"></span><br><span class="line">m.has(o) <span class="comment">// true</span></span><br><span class="line">m.delete(o) <span class="comment">// true</span></span><br><span class="line">m.has(o) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä¾‹å­å±•ç¤ºäº†å¦‚ä½•å‘ Map æ·»åŠ æˆå‘˜ã€‚ä½œä¸ºæ„é€ å‡½æ•°ï¼ŒMap ä¹Ÿå¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ã€‚è¯¥æ•°ç»„çš„æˆå‘˜æ˜¯ä¸€ä¸ªä¸ªè¡¨ç¤ºé”®å€¼å¯¹çš„æ•°ç»„ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">'name'</span>, <span class="string">'å¼ ä¸‰'</span>],</span><br><span class="line">  [<span class="string">'title'</span>, <span class="string">'Author'</span>]</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">map.size <span class="comment">// 2</span></span><br><span class="line">map.has(<span class="string">'name'</span>) <span class="comment">// true</span></span><br><span class="line">map.get(<span class="string">'name'</span>) <span class="comment">// "å¼ ä¸‰"</span></span><br><span class="line">map.has(<span class="string">'title'</span>) <span class="comment">// true</span></span><br><span class="line">map.get(<span class="string">'title'</span>) <span class="comment">// "Author"</span></span><br></pre></td></tr></table></figure>

<p><code>Map</code>æ„é€ å‡½æ•°æ¥å—æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯ä¸‹é¢çš„ç®—æ³•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> items = [</span><br><span class="line">  [<span class="string">'name'</span>, <span class="string">'å¼ ä¸‰'</span>],</span><br><span class="line">  [<span class="string">'title'</span>, <span class="string">'Author'</span>]</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line">items.forEach(</span><br><span class="line">  ([key, value]) =&gt; map.set(key, value)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•"><a href="#å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•" class="headerlink" title="å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•"></a>å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•</h3><p><strong>ï¼ˆ1ï¼‰size å±æ€§</strong></p>
<p><code>size</code>å±æ€§è¿”å› Map ç»“æ„çš„æˆå‘˜æ€»æ•°ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰Map.prototype.set(key, value)</strong></p>
<p><code>set</code>æ–¹æ³•è®¾ç½®é”®å<code>key</code>å¯¹åº”çš„é”®å€¼ä¸º<code>value</code>ï¼Œç„¶åè¿”å›æ•´ä¸ª Map ç»“æ„ã€‚å¦‚æœ<code>key</code>å·²ç»æœ‰å€¼ï¼Œåˆ™é”®å€¼ä¼šè¢«æ›´æ–°ï¼Œå¦åˆ™å°±æ–°ç”Ÿæˆè¯¥é”®ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line">m.set(<span class="string">'edition'</span>, <span class="number">6</span>)        <span class="comment">// é”®æ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line">m.set(<span class="number">262</span>, <span class="string">'standard'</span>)     <span class="comment">// é”®æ˜¯æ•°å€¼</span></span><br><span class="line">m.set(<span class="literal">undefined</span>, <span class="string">'nah'</span>)    <span class="comment">// é”®æ˜¯ undefined</span></span><br></pre></td></tr></table></figure>

<p><code>set</code>æ–¹æ³•è¿”å›çš„æ˜¯å½“å‰çš„<code>Map</code>å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">  .set(<span class="number">1</span>, <span class="string">'a'</span>)</span><br><span class="line">  .set(<span class="number">2</span>, <span class="string">'b'</span>)</span><br><span class="line">  .set(<span class="number">3</span>, <span class="string">'c'</span>);</span><br></pre></td></tr></table></figure>

<p><strong>ï¼ˆ3ï¼‰Map.prototype.get(key)</strong></p>
<p><code>get</code>æ–¹æ³•è¯»å–<code>key</code>å¯¹åº”çš„é”®å€¼ï¼Œå¦‚æœæ‰¾ä¸åˆ°<code>key</code>ï¼Œè¿”å›<code>undefined</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="built_in">console</span>.log(<span class="string">'hello'</span>);&#125;;</span><br><span class="line">m.set(hello, <span class="string">'Hello ES6!'</span>) <span class="comment">// é”®æ˜¯å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">m.get(hello)  <span class="comment">// Hello ES6!</span></span><br></pre></td></tr></table></figure>

<p><strong>ï¼ˆ4ï¼‰Map.prototype.has(key)</strong></p>
<p><code>has</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªé”®æ˜¯å¦åœ¨å½“å‰ Map å¯¹è±¡ä¹‹ä¸­ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line">m.set(<span class="string">'edition'</span>, <span class="number">6</span>);</span><br><span class="line">m.set(<span class="number">262</span>, <span class="string">'standard'</span>);</span><br><span class="line">m.set(<span class="literal">undefined</span>, <span class="string">'nah'</span>);</span><br><span class="line"></span><br><span class="line">m.has(<span class="string">'edition'</span>)     <span class="comment">// true</span></span><br><span class="line">m.has(<span class="string">'years'</span>)       <span class="comment">// false</span></span><br><span class="line">m.has(<span class="number">262</span>)           <span class="comment">// true</span></span><br><span class="line">m.has(<span class="literal">undefined</span>)     <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><strong>ï¼ˆ5ï¼‰Map.prototype.delete(key)</strong></p>
<p><code>delete</code>æ–¹æ³•åˆ é™¤æŸä¸ªé”®ï¼Œè¿”å›<code>true</code>ã€‚å¦‚æœåˆ é™¤å¤±è´¥ï¼Œè¿”å›<code>false</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">m.set(<span class="literal">undefined</span>, <span class="string">'nah'</span>);</span><br><span class="line">m.has(<span class="literal">undefined</span>)     <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">m.delete(<span class="literal">undefined</span>)</span><br><span class="line">m.has(<span class="literal">undefined</span>)       <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p><strong>ï¼ˆ6ï¼‰Map.prototype.clear()</strong></p>
<p><code>clear</code>æ–¹æ³•æ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">'foo'</span>, <span class="literal">true</span>);</span><br><span class="line">map.set(<span class="string">'bar'</span>, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">map.size <span class="comment">// 2</span></span><br><span class="line">map.clear()</span><br><span class="line">map.size <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<h3 id="éå†æ–¹æ³•"><a href="#éå†æ–¹æ³•" class="headerlink" title="éå†æ–¹æ³•"></a>éå†æ–¹æ³•</h3><p>Map ç»“æ„åŸç”Ÿæä¾›ä¸‰ä¸ªéå†å™¨ç”Ÿæˆå‡½æ•°å’Œä¸€ä¸ªéå†æ–¹æ³•ã€‚</p>
<ul>
<li><code>Map.prototype.keys()</code>ï¼šè¿”å›é”®åçš„éå†å™¨ã€‚</li>
<li><code>Map.prototype.values()</code>ï¼šè¿”å›é”®å€¼çš„éå†å™¨ã€‚</li>
<li><code>Map.prototype.entries()</code>ï¼šè¿”å›æ‰€æœ‰æˆå‘˜çš„éå†å™¨ã€‚</li>
<li><code>Map.prototype.forEach()</code>ï¼šéå† Map çš„æ‰€æœ‰æˆå‘˜ã€‚</li>
</ul>
<p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼ŒMap çš„éå†é¡ºåºå°±æ˜¯æ’å…¥é¡ºåºã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">'F'</span>, <span class="string">'no'</span>],</span><br><span class="line">  [<span class="string">'T'</span>,  <span class="string">'yes'</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> map.keys()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// "F"</span></span><br><span class="line"><span class="comment">// "T"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> map.values()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// "no"</span></span><br><span class="line"><span class="comment">// "yes"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> map.entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item[<span class="number">0</span>], item[<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// "F" "no"</span></span><br><span class="line"><span class="comment">// "T" "yes"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map.entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// "F" "no"</span></span><br><span class="line"><span class="comment">// "T" "yes"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäºä½¿ç”¨map.entries()</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// "F" "no"</span></span><br><span class="line"><span class="comment">// "T" "yes"</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç æœ€åçš„é‚£ä¸ªä¾‹å­ï¼Œè¡¨ç¤º Map ç»“æ„çš„é»˜è®¤éå†å™¨æ¥å£ï¼ˆ<code>Symbol.iterator</code>å±æ€§ï¼‰ï¼Œå°±æ˜¯<code>entries</code>æ–¹æ³•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">map[<span class="built_in">Symbol</span>.iterator] === map.entries</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>Map ç»“æ„è½¬ä¸ºæ•°ç»„ç»“æ„ï¼Œæ¯”è¾ƒå¿«é€Ÿçš„æ–¹æ³•æ˜¯ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="number">1</span>, <span class="string">'one'</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="string">'two'</span>],</span><br><span class="line">  [<span class="number">3</span>, <span class="string">'three'</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">[...map.keys()]</span><br><span class="line"><span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line">[...map.values()]</span><br><span class="line"><span class="comment">// ['one', 'two', 'three']</span></span><br><span class="line"></span><br><span class="line">[...map.entries()]</span><br><span class="line"><span class="comment">// [[1,'one'], [2, 'two'], [3, 'three']]</span></span><br><span class="line"></span><br><span class="line">[...map]</span><br><span class="line"><span class="comment">// [[1,'one'], [2, 'two'], [3, 'three']]</span></span><br></pre></td></tr></table></figure>

<p>ç»“åˆæ•°ç»„çš„<code>map</code>æ–¹æ³•ã€<code>filter</code>æ–¹æ³•ï¼Œå¯ä»¥å®ç° Map çš„éå†å’Œè¿‡æ»¤ï¼ˆMap æœ¬èº«æ²¡æœ‰<code>map</code>å’Œ<code>filter</code>æ–¹æ³•ï¼‰ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map0 = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">  .set(<span class="number">1</span>, <span class="string">'a'</span>)</span><br><span class="line">  .set(<span class="number">2</span>, <span class="string">'b'</span>)</span><br><span class="line">  .set(<span class="number">3</span>, <span class="string">'c'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map1 = <span class="keyword">new</span> <span class="built_in">Map</span>(</span><br><span class="line">  [...map0].filter(<span class="function">(<span class="params">[k, v]</span>) =&gt;</span> k &lt; <span class="number">3</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">// äº§ç”Ÿ Map ç»“æ„ &#123;1 =&gt; 'a', 2 =&gt; 'b'&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map2 = <span class="keyword">new</span> <span class="built_in">Map</span>(</span><br><span class="line">  [...map0].map(<span class="function">(<span class="params">[k, v]</span>) =&gt;</span> [k * <span class="number">2</span>, <span class="string">'_'</span> + v])</span><br><span class="line">    );</span><br><span class="line"><span class="comment">// äº§ç”Ÿ Map ç»“æ„ &#123;2 =&gt; '_a', 4 =&gt; '_b', 6 =&gt; '_c'&#125;</span></span><br></pre></td></tr></table></figure>

<p>æ­¤å¤–ï¼ŒMap è¿˜æœ‰ä¸€ä¸ª<code>forEach</code>æ–¹æ³•ï¼Œä¸æ•°ç»„çš„<code>forEach</code>æ–¹æ³•ç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥å®ç°éå†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">map.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value, key, map</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Key: %s, Value: %s"</span>, key, value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>forEach</code>æ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®š<code>this</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reporter = &#123;</span><br><span class="line">  report: <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Key: %s, Value: %s"</span>, key, value);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">map.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value, key, map</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.report(key, value);</span><br><span class="line">&#125;, reporter);</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>forEach</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°çš„<code>this</code>ï¼Œå°±æŒ‡å‘<code>reporter</code>ã€‚</p>
<h3 id="ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢"><a href="#ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢" class="headerlink" title="ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢"></a>ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢</h3><p><strong>ï¼ˆ1ï¼‰Map è½¬ä¸ºæ•°ç»„</strong></p>
<p>å‰é¢å·²ç»æè¿‡ï¼ŒMap è½¬ä¸ºæ•°ç»„æœ€æ–¹ä¾¿çš„æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myMap = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">  .set(<span class="literal">true</span>, <span class="number">7</span>)</span><br><span class="line">  .set(&#123;<span class="attr">foo</span>: <span class="number">3</span>&#125;, [<span class="string">'abc'</span>]);</span><br><span class="line">[...myMap]</span><br><span class="line"><span class="comment">// [ [ true, 7 ], [ &#123; foo: 3 &#125;, [ 'abc' ] ] ]</span></span><br></pre></td></tr></table></figure>

<p><strong>ï¼ˆ2ï¼‰æ•°ç»„ è½¬ä¸º Map</strong></p>
<p>å°†æ•°ç»„ä¼ å…¥ Map æ„é€ å‡½æ•°ï¼Œå°±å¯ä»¥è½¬ä¸º Mapã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="literal">true</span>, <span class="number">7</span>],</span><br><span class="line">  [&#123;<span class="attr">foo</span>: <span class="number">3</span>&#125;, [<span class="string">'abc'</span>]]</span><br><span class="line">])</span><br><span class="line"><span class="comment">// Map &#123;</span></span><br><span class="line"><span class="comment">//   true =&gt; 7,</span></span><br><span class="line"><span class="comment">//   Object &#123;foo: 3&#125; =&gt; ['abc']</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>ï¼ˆ3ï¼‰Map è½¬ä¸ºå¯¹è±¡</strong></p>
<p>å¦‚æœæ‰€æœ‰ Map çš„é”®éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒå¯ä»¥æ— æŸåœ°è½¬ä¸ºå¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">strMapToObj</span>(<span class="params">strMap</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> obj = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> [k,v] <span class="keyword">of</span> strMap) &#123;</span><br><span class="line">    obj[k] = v;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myMap = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">  .set(<span class="string">'yes'</span>, <span class="literal">true</span>)</span><br><span class="line">  .set(<span class="string">'no'</span>, <span class="literal">false</span>);</span><br><span class="line">strMapToObj(myMap)</span><br><span class="line"><span class="comment">// &#123; yes: true, no: false &#125;</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæœ‰éå­—ç¬¦ä¸²çš„é”®åï¼Œé‚£ä¹ˆè¿™ä¸ªé”®åä¼šè¢«è½¬æˆå­—ç¬¦ä¸²ï¼Œå†ä½œä¸ºå¯¹è±¡çš„é”®åã€‚</p>
<p><strong>ï¼ˆ4ï¼‰å¯¹è±¡è½¬ä¸º Map</strong></p>
<p>å¯¹è±¡è½¬ä¸º Map å¯ä»¥é€šè¿‡<code>Object.entries()</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="string">"a"</span>:<span class="number">1</span>, <span class="string">"b"</span>:<span class="number">2</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(<span class="built_in">Object</span>.entries(obj));</span><br></pre></td></tr></table></figure>

<p>æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªè½¬æ¢å‡½æ•°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">objToStrMap</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> strMap = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">of</span> <span class="built_in">Object</span>.keys(obj)) &#123;</span><br><span class="line">    strMap.set(k, obj[k]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> strMap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">objToStrMap(&#123;<span class="attr">yes</span>: <span class="literal">true</span>, <span class="attr">no</span>: <span class="literal">false</span>&#125;)</span><br><span class="line"><span class="comment">// Map &#123;"yes" =&gt; true, "no" =&gt; false&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>ï¼ˆ5ï¼‰Map è½¬ä¸º JSON</strong></p>
<p>Map è½¬ä¸º JSON è¦åŒºåˆ†ä¸¤ç§æƒ…å†µã€‚ä¸€ç§æƒ…å†µæ˜¯ï¼ŒMap çš„é”®åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™æ—¶å¯ä»¥é€‰æ‹©è½¬ä¸ºå¯¹è±¡ JSONã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">strMapToJson</span>(<span class="params">strMap</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify(strMapToObj(strMap));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myMap = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="string">'yes'</span>, <span class="literal">true</span>).set(<span class="string">'no'</span>, <span class="literal">false</span>);</span><br><span class="line">strMapToJson(myMap)</span><br><span class="line"><span class="comment">// '&#123;"yes":true,"no":false&#125;'</span></span><br></pre></td></tr></table></figure>

<p>å¦ä¸€ç§æƒ…å†µæ˜¯ï¼ŒMap çš„é”®åæœ‰éå­—ç¬¦ä¸²ï¼Œè¿™æ—¶å¯ä»¥é€‰æ‹©è½¬ä¸ºæ•°ç»„ JSONã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapToArrayJson</span>(<span class="params">map</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify([...map]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myMap = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="literal">true</span>, <span class="number">7</span>).set(&#123;<span class="attr">foo</span>: <span class="number">3</span>&#125;, [<span class="string">'abc'</span>]);</span><br><span class="line">mapToArrayJson(myMap)</span><br><span class="line"><span class="comment">// '[[true,7],[&#123;"foo":3&#125;,["abc"]]]'</span></span><br></pre></td></tr></table></figure>

<p><strong>ï¼ˆ6ï¼‰JSON è½¬ä¸º Map</strong></p>
<p>JSON è½¬ä¸º Mapï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œæ‰€æœ‰é”®åéƒ½æ˜¯å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonToStrMap</span>(<span class="params">jsonStr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> objToStrMap(<span class="built_in">JSON</span>.parse(jsonStr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jsonToStrMap(<span class="string">'&#123;"yes": true, "no": false&#125;'</span>)</span><br><span class="line"><span class="comment">// Map &#123;'yes' =&gt; true, 'no' =&gt; false&#125;</span></span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œæœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œæ•´ä¸ª JSON å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¸”æ¯ä¸ªæ•°ç»„æˆå‘˜æœ¬èº«ï¼Œåˆæ˜¯ä¸€ä¸ªæœ‰ä¸¤ä¸ªæˆå‘˜çš„æ•°ç»„ã€‚è¿™æ—¶ï¼Œå®ƒå¯ä»¥ä¸€ä¸€å¯¹åº”åœ°è½¬ä¸º Mapã€‚è¿™å¾€å¾€æ˜¯ Map è½¬ä¸ºæ•°ç»„ JSON çš„é€†æ“ä½œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonToMap</span>(<span class="params">jsonStr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Map</span>(<span class="built_in">JSON</span>.parse(jsonStr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jsonToMap(<span class="string">'[[true,7],[&#123;"foo":3&#125;,["abc"]]]'</span>)</span><br><span class="line"><span class="comment">// Map &#123;true =&gt; 7, Object &#123;foo: 3&#125; =&gt; ['abc']&#125;</span></span><br></pre></td></tr></table></figure></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/06/01/1347-%E5%88%B6%E9%80%A0%E5%AD%97%E6%AF%8D%E5%BC%82%E4%BD%8D%E8%AF%8D%E7%9A%84%E6%9C%80%E5%B0%8F%E6%AD%A5%E9%AA%A4%E6%95%B0/">1347.åˆ¶é€ å­—æ¯å¼‚ä½è¯çš„æœ€å°æ­¥éª¤æ•°</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-06-01</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/%E7%AE%97%E6%B3%95/">ç®—æ³•</a></span><div class="content"><h3 id="é¢˜å¹²åœ¨æ­¤"><a href="#é¢˜å¹²åœ¨æ­¤" class="headerlink" title="é¢˜å¹²åœ¨æ­¤"></a>é¢˜å¹²åœ¨æ­¤</h3><p><img src="https://i.loli.net/2020/06/01/PX5UKbNvhOkoYQm.png" alt=""></p>
<h3 id="æˆ‘çš„è§£é¢˜"><a href="#æˆ‘çš„è§£é¢˜" class="headerlink" title="æˆ‘çš„è§£é¢˜"></a>æˆ‘çš„è§£é¢˜</h3><p>å…ˆå°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°ç»„ï¼Œç„¶åå°†ä¸¤æ•°ç»„ç›¸åŒçš„å…ƒç´ åˆ é™¤ï¼Œå¤„ç†åçš„æ•°ç»„é•¿åº¦ä¾¿ä¸ºæœ€å°æ­¥éª¤æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> minSteps = <span class="function"><span class="keyword">function</span>(<span class="params">s, t</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> arrT = []</span><br><span class="line">    <span class="keyword">const</span> arrS = []</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i =<span class="number">0</span>; i&lt;t.length; i++) &#123;</span><br><span class="line">        arrT.push(t.slice(i,i+<span class="number">1</span>))</span><br><span class="line">        arrS.push(s.slice(i,i+<span class="number">1</span>))</span><br><span class="line">    &#125;</span><br><span class="line">    arrT.map(<span class="function">(<span class="params">v</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> index = arrS.findIndex(<span class="function"><span class="params">k</span> =&gt;</span> k===v)</span><br><span class="line">        <span class="keyword">if</span>(index !== <span class="number">-1</span>) &#123;</span><br><span class="line">            arrS.splice(index, <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> arrS.length</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸å‡ºæ‰€æ–™çš„è¿˜æ˜¯è¶…æ—¶äº†ï¼Œåˆ°åœ¨é•¿åº¦ä¸º50000çš„å­—ç¬¦ä¸²çš„æµ‹è¯•ç”¨ä¾‹ä¸‹ã€‚</p>
<p>map * findIndex çš„æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯å¤ªé«˜äº†ã€‚</p>
<p>åæ¥æƒ³åˆ°å­—ç¬¦ä¸²çš„APIä¹Ÿæ”¯æŒå¦‚æ­¤æ“ä½œï¼Œä¼˜åŒ–äº†ä»£ç ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> minSteps = <span class="function"><span class="keyword">function</span>(<span class="params">s, t</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = s</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i&lt;t.length; i++) &#123;</span><br><span class="line">        res = res.replace(t.charAt(i), <span class="string">""</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.length</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯å¾ˆé«˜ï¼Œä½†æ˜¯æäº¤é€šè¿‡äº†ã€‚</p>
<p>ç”¨jså†™äº†ä¸¤é“ç®—æ³•åï¼Œæˆ‘å‘ç°jsä¸é€‚åˆåšç®—æ³•ã€‚å¾ˆå¤šAPIæ— æ³•ç›´æ¥æ„Ÿå—åˆ°å®ƒçš„æ—¶é—´å¤æ‚åº¦ï¼Œéœ€è¦å»æœç´¢æ‰èƒ½å¤§æ¦‚äº†è§£å®ƒçš„å¤æ‚åº¦ã€‚</p>
<p>æœ¬èº«å†™ä»£ç æ—¶å€™éƒ½æ˜¯ç›´æ¥ç”¨APIï¼Œåšé¢˜æ—¶å€™å´ä¸å¤ªèƒ½ç”¨è¿™äº›ï¼Œä¸¤è€…å¾ˆçŸ›ç›¾ã€‚</p>
<p>æ„Ÿè§‰å¦‚æœæƒ³åšæŒåšç®—æ³•ï¼Œè¿˜æ˜¯è¦ç”¨ä¸€é—¨ç¼–è¯‘å‹è¯­è¨€æ¥åšé¢˜ï¼Œè§£é‡Šå‹çš„è¯­è¨€è¿˜æ˜¯æ¯”è¾ƒåƒäºã€‚</p>
<h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>æˆ‘ä¸€å¼€å§‹æ²¡æƒ³åˆ°mapï¼Œmapçš„æ€§èƒ½è¿˜æ˜¯å¾ˆé«˜çš„ã€‚</p>
<p>ç”¨å“ˆå¸Œè¡¨ç¤ºsçš„æ‰€æœ‰å­—æ¯å‡ºç°çš„æ¬¡æ•°ï¼Œéå†tï¼Œè¯¥å­—æ¯åœ¨så‡ºç°ä¸€æ¬¡ï¼Œå“ˆå¸Œè¡¨è¯¥å­—æ¯å‡ä¸€ã€‚å“ˆå¸Œè¡¨æ‰€æœ‰æ­£å€¼æ±‚å’Œï¼Œå³ä¸ºæœ€å°æ­¥éª¤æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> minSteps = <span class="function"><span class="keyword">function</span>(<span class="params">s, t</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(), ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = s.length; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> c = s.charAt(i)</span><br><span class="line">        <span class="keyword">if</span> (!map.has( c )) &#123;</span><br><span class="line">            map.set( c, <span class="number">1</span> )</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            map.set( c, map.get( c ) + <span class="number">1</span> )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = t.length; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> c = t.charAt(i)</span><br><span class="line">        <span class="keyword">if</span> (map.has( c )) &#123;</span><br><span class="line">            map.set( c, map.get( c ) - <span class="number">1</span> )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    map = [...map]</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = map.length; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (map[i][<span class="number">1</span>] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            ans += map[i][<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æ³¨æ„æ—¶é—´å¤æ‚åº¦ï¼Œä¸è¦é€’å½’ï¼Œä¸è¦å¾ªç¯å¥—å¾ªç¯ï¼Œè¿™æ ·ä¼šä½¿å¾—O(n)è¶…çº§åŠ å€ã€‚</p>
<p>jsä¸é€‚åˆåšç®—æ³•ï¼Œå®ƒæ‰€æä¾›çš„æ–¹æ³•åŸºæœ¬ä¸èƒ½ç›´è§‚è§‚å¯Ÿå‡ºæ—¶é—´å¤æ‚åº¦ï¼Œæ€§èƒ½è¿˜å·®ï¼Œå°½æ—©å­¦Cã€‚</p>
</div><hr></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2021 By Kari WanG</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>